{"ast":null,"code":"import React,{useState}from'react';import{Box,Button,Tabs,Tab,TextField,Alert,CircularProgress,Grid}from'@mui/material';import{useNavigate}from'react-router-dom';import{storeToken,getAuthId,getTempUserDetails,removeAuthId,removeTempUserDetails}from'../../services/LocalStorage';import{useVerifyloginOTPMutation}from'../../services/authApi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Userloginverify=()=>{const[otp,setOtp]=useState('');const[value,setValue]=useState(0);const handleChange=(event,newValue)=>{setValue(newValue);};const[authid,setAuthId]=useState(getAuthId());const[error,setError]=useState({status:false,msg:'',type:''});const[verifyLoginOTP,{isLoading}]=useVerifyloginOTPMutation();const navigate=useNavigate();const actualData=getTempUserDetails();const handleErrorTimeout=(message,type)=>{setError({status:true,msg:message,type:type});setTimeout(()=>{setError({status:false,msg:'',type:''});},5000);};const handleVerifyOTP=async e=>{e.preventDefault();const GetactualData={email:authid,actualData,otp};try{const res=await verifyLoginOTP(GetactualData).unwrap();if(res.status==='success'){handleErrorTimeout(res.message,'success');storeToken(res.token);removeAuthId();removeTempUserDetails();setTimeout(()=>{navigate('/Dashboard');window.location.reload();},4000);}else{handleErrorTimeout(res.message,'error');}}catch(err){handleErrorTimeout(\"OTP verification failed\",'error');}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"center\",alignItems:\"center\",textshadow:\"3px 2px 2px white\",display:\"flex\",flexDirection:\"column\",sx:{background:'linear-gradient(to right, black, purple, navy, black)',backgroundSize:'cover',backgroundPosition:'center',backgroundRepeat:'no-repeat',minHeight:'100vh',padding:2},children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:8,md:6,lg:4,sx:{background:'rgba(255, 255, 255, 0.8)',border:'2px solid rgba(0, 0, 0, 0.5)',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',padding:3,borderRadius:8,backdropFilter:'blur(20px)',boxShadow:3,textAlign:'center'},children:/*#__PURE__*/_jsxs(Box,{sx:{width:'100%'},children:[/*#__PURE__*/_jsx(Tabs,{value:value,onChange:handleChange,centered:true,TabIndicatorProps:{style:{backgroundColor:'navy'}},sx:{marginBottom:2},children:/*#__PURE__*/_jsx(Tab,{label:\"Verify OTP\",sx:{textTransform:'none',fontWeight:'bold',color:'navy'}})}),/*#__PURE__*/_jsxs(Box,{component:\"form\",sx:{p:3,display:'flex',justifyContent:'center'},noValidate:true,id:\"verify-otp-regform\",onSubmit:handleVerifyOTP,children:[/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"otp\",label:\"Enter OTP\",value:otp,onChange:e=>setOtp(e.target.value),margin:\"normal\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{sx:{m:2,display:'flex',justifyContent:'center'},children:[isLoading?/*#__PURE__*/_jsx(CircularProgress,{}):/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"info\",children:\"Verify\"}),error.status&&/*#__PURE__*/_jsx(Alert,{severity:error.type,sx:{textAlign:'center'},children:error.msg})]})]})]})})})});};export default Userloginverify;","map":{"version":3,"names":["React","useState","Box","Button","Tabs","Tab","TextField","Alert","CircularProgress","Grid","useNavigate","storeToken","getAuthId","getTempUserDetails","removeAuthId","removeTempUserDetails","useVerifyloginOTPMutation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Userloginverify","otp","setOtp","value","setValue","handleChange","event","newValue","authid","setAuthId","error","setError","status","msg","type","verifyLoginOTP","isLoading","navigate","actualData","handleErrorTimeout","message","setTimeout","handleVerifyOTP","e","preventDefault","GetactualData","email","res","unwrap","token","window","location","reload","err","children","container","justifyContent","alignItems","textshadow","display","flexDirection","sx","background","backgroundSize","backgroundPosition","backgroundRepeat","minHeight","padding","item","xs","sm","md","lg","border","borderRadius","backdropFilter","boxShadow","textAlign","width","onChange","centered","TabIndicatorProps","style","backgroundColor","marginBottom","label","textTransform","fontWeight","color","component","p","noValidate","id","onSubmit","required","fullWidth","target","margin","m","variant","severity"],"sources":["D:/4th Sem projects/Project_2FA/authreactapp/src/Pages/Auth/Userloginverify.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Box, Button, Tabs, Tab, TextField, Alert, CircularProgress, Grid } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { storeToken, getAuthId,getTempUserDetails, removeAuthId, removeTempUserDetails } from '../../services/LocalStorage';\r\nimport { useVerifyloginOTPMutation } from '../../services/authApi';\r\n\r\nconst Userloginverify = () => {\r\n  const [otp, setOtp] = useState('');\r\n  const [value, setValue] = useState(0);\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  const [authid, setAuthId] = useState(getAuthId());\r\n  const [error, setError] = useState({ status: false, msg: '', type: '' });\r\n  const [verifyLoginOTP, { isLoading }] = useVerifyloginOTPMutation();\r\n  const navigate = useNavigate();\r\n  const actualData = getTempUserDetails();\r\n\r\n  const handleErrorTimeout = (message, type) => {\r\n    setError({ status: true, msg: message, type: type });\r\n    setTimeout(() => {\r\n      setError({ status: false, msg: '', type: '' });\r\n    }, 5000);\r\n  };\r\n\r\n  const handleVerifyOTP = async (e) => {\r\n    e.preventDefault();\r\n    const GetactualData = { email: authid, actualData, otp };\r\n\r\n    try {\r\n      const res = await verifyLoginOTP(GetactualData).unwrap();\r\n      if (res.status === 'success') {\r\n        handleErrorTimeout(res.message,'success' );\r\n        storeToken(res.token);\r\n        removeAuthId();\r\n        removeTempUserDetails();\r\n        setTimeout(() => {\r\n          navigate('/Dashboard');\r\n          window.location.reload();\r\n        }, 4000);\r\n      } else {\r\n        handleErrorTimeout( res.message,'error' );\r\n      }\r\n    } catch (err) {\r\n      handleErrorTimeout(\"OTP verification failed\", 'error' );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Grid\r\n        container\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        textshadow=\"3px 2px 2px white\"\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        sx={{\r\n          background: 'linear-gradient(to right, black, purple, navy, black)',\r\n          backgroundSize: 'cover',\r\n          backgroundPosition: 'center',\r\n          backgroundRepeat: 'no-repeat',\r\n          minHeight: '100vh',\r\n          padding: 2,\r\n        }}\r\n      >\r\n        <Grid\r\n          item\r\n          xs={12}\r\n          sm={8}\r\n          md={6}\r\n          lg={4}\r\n          sx={{\r\n            background: 'rgba(255, 255, 255, 0.8)',\r\n            border: '2px solid rgba(0, 0, 0, 0.5)',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: 3,\r\n            borderRadius: 8,\r\n            backdropFilter: 'blur(20px)',\r\n            boxShadow: 3,\r\n            textAlign: 'center',\r\n          }}\r\n        >\r\n          <Box sx={{ width: '100%' }}>\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              centered\r\n              TabIndicatorProps={{ style: { backgroundColor: 'navy' } }}\r\n              sx={{ marginBottom: 2 }}\r\n            >\r\n              <Tab label=\"Verify OTP\" sx={{ textTransform: 'none', fontWeight: 'bold', color: 'navy' }} />\r\n            </Tabs>\r\n            <Box component=\"form\" sx={{ p: 3, display: 'flex', justifyContent: 'center' }} noValidate id=\"verify-otp-regform\" onSubmit={handleVerifyOTP}>\r\n              <TextField required fullWidth id=\"otp\" label=\"Enter OTP\" value={otp} onChange={(e) => setOtp(e.target.value)} margin=\"normal\" />\r\n              <br />\r\n              <Box sx={{ m: 2, display: 'flex', justifyContent: 'center' }}>\r\n                {isLoading ? <CircularProgress /> : <Button type=\"submit\" variant=\"contained\" color=\"info\">Verify</Button>}\r\n                {error.status && <Alert severity={error.type} sx={{ textAlign: 'center' }}>{error.msg}</Alert>}\r\n              </Box>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Userloginverify;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}